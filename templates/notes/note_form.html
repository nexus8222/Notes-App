{% extends "base.html" %}
{% block content %}
<h3>{% if is_new %}New Note{% else %}Edit Note{% endif %}</h3>
<form method="post" class="mt-3" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="mb-3">
    <label class="form-label" for="{{ form.title.id_for_label }}">Title</label>
    {{ form.title }}
  </div>
  <div class="mb-3">
    <label class="form-label" for="{{ form.content.id_for_label }}">Content</label>
    {{ form.content }}
  </div>
  <div class="mb-3">
    <label class="form-label" for="{{ form.tags.id_for_label }}">Tags</label>
    {{ form.tags }}
    <div class="form-text">{{ form.tags.help_text }}</div>
  </div>
  <div class="form-check mb-3">
    {{ form.is_pinned }}
    <label class="form-check-label" for="{{ form.is_pinned.id_for_label }}">Pin this note to the top</label>
  </div>
  <div class="mb-3">
    <label class="form-label" for="{{ form.attachments.id_for_label }}">Add Attachments</label>
    {{ form.attachments }}
  </div>

  <hr>
  <h5><i class="fas fa-key me-2"></i>Password Protection</h5>
  <p class="text-muted small">To remove an existing password, submit the form with both password fields left empty.</p>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label" for="{{ form.password.id_for_label }}">New Password</label>
      {{ form.password }}
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label" for="{{ form.confirm_password.id_for_label }}">Confirm Password</label>
      {{ form.confirm_password }}
    </div>
  </div>
  {% if form.non_field_errors %}
    <div class="alert alert-danger p-2">{{ form.non_field_errors.as_ul }}</div>
  {% endif %}
  <hr>

  <button class="btn btn-primary" type="submit"><i class="fa fa-save"></i> Save</button>
  <a href="{% if note %}{% url 'note_detail' note.id %}{% else %}{% url 'note_list' %}{% endif %}" class="btn btn-secondary ms-2">Cancel</a>
</form>
{% endblock %}
